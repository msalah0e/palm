<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LLM Proxy â€” palm</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒ´</text></svg>">
<link rel="stylesheet" href="../shared/style.css">
</head>
<body>

<nav>
  <a class="logo" href="/palm/">ðŸŒ´ palm <span class="v-badge">v1.2</span></a>
  <div class="links">
    <a href="../index.html">Home</a>
    <a href="../getting-started/">Get Started</a>
    <a href="../commands/">Commands</a>
    <a href="../guides/api-keys.html" class="active">Guides</a>
    <a href="https://github.com/msalah0e/palm">GitHub</a>
  </div>
</nav>

<div class="layout">
  <aside class="sidebar">
    <div class="group-title">Guides</div>
    <a href="api-keys.html">API Key Management</a>
    <a href="proxy.html" class="active">LLM Proxy</a>
    <a href="offline-mode.html">Offline Mode</a>
    <a href="local-llm.html">Local LLMs</a>
    <a href="worktree.html">Git Worktrees</a>
    <a href="ci-integration.html">CI/CD Integration</a>

    <div class="group-title">Reference</div>
    <a href="../getting-started/">Getting Started</a>
    <a href="../commands/">Command Reference</a>
  </aside>

  <main class="content">
    <h1><span class="palm">LLM</span> Proxy</h1>
    <p class="lead">
      Route all LLM API calls through palm for logging, budgeting, and key injection.
    </p>

    <h2 id="overview">Overview</h2>
    <p>palm proxy is a local reverse proxy that sits between your AI tools and LLM providers. It:</p>
    <ul>
      <li>Auto-injects API keys from the vault</li>
      <li>Logs all requests for visibility</li>
      <li>Enables budget enforcement</li>
      <li>Routes to the correct upstream based on path prefix</li>
    </ul>

    <h2 id="start">Starting the Proxy</h2>
    <div class="codeblock">
<span class="comment"># Start in foreground</span>
<span class="prompt">$</span> palm proxy start

<span class="comment"># Start in background (daemon mode)</span>
<span class="prompt">$</span> palm proxy start --bg

<span class="comment"># Custom port</span>
<span class="prompt">$</span> palm proxy start --port 8080

<span class="comment"># Verbose logging</span>
<span class="prompt">$</span> palm proxy start --verbose
    </div>

    <h2 id="routes">Provider Routes</h2>
    <table class="doc-table">
      <tr><th>Path Prefix</th><th>Upstream</th><th>Key Variable</th></tr>
      <tr><td>/openai/</td><td>https://api.openai.com</td><td>OPENAI_API_KEY</td></tr>
      <tr><td>/anthropic/</td><td>https://api.anthropic.com</td><td>ANTHROPIC_API_KEY</td></tr>
      <tr><td>/google/</td><td>https://generativelanguage.googleapis.com</td><td>GOOGLE_API_KEY</td></tr>
      <tr><td>/groq/</td><td>https://api.groq.com</td><td>GROQ_API_KEY</td></tr>
      <tr><td>/mistral/</td><td>https://api.mistral.ai</td><td>MISTRAL_API_KEY</td></tr>
      <tr><td>/ollama/</td><td>http://localhost:11434</td><td>(none)</td></tr>
    </table>

    <h2 id="usage">Using the Proxy</h2>
    <div class="codeblock">
<span class="comment"># Set base URLs to route through palm</span>
<span class="prompt">$</span> export OPENAI_BASE_URL=http://localhost:4778/openai/v1
<span class="prompt">$</span> export ANTHROPIC_BASE_URL=http://localhost:4778/anthropic/v1

<span class="comment"># Now all API calls from any tool go through palm</span>
<span class="comment"># Keys are auto-injected, requests are logged and budgeted</span>
    </div>

    <div class="info-box">
      <strong>Add to your shell profile</strong> for persistent proxy usage:
      <div class="codeblock" style="margin-top:0.5rem;margin-bottom:0">
export OPENAI_BASE_URL=http://localhost:4778/openai/v1
export ANTHROPIC_BASE_URL=http://localhost:4778/anthropic/v1
      </div>
    </div>

    <h2 id="logs">Viewing Logs</h2>
    <div class="codeblock">
<span class="prompt">$</span> palm proxy logs
<span class="output">  Time      Provider   Method  Path                    Status  Duration</span>
<span class="output">  14:32:01  openai     POST    /v1/chat/completions    200     1.2s</span>
<span class="output">  14:32:15  anthropic  POST    /v1/messages            200     2.1s</span>

<span class="comment"># Show last 100 entries</span>
<span class="prompt">$</span> palm proxy logs -n 100
    </div>

    <h2 id="management">Management</h2>
    <div class="codeblock">
<span class="comment"># Check status</span>
<span class="prompt">$</span> palm proxy status
<span class="success">  âœ“ Proxy running (PID 12345)</span>
<span class="output">  Routes: /openai/, /anthropic/, /google/, /groq/, /mistral/, /ollama/</span>

<span class="comment"># Stop the proxy</span>
<span class="prompt">$</span> palm proxy stop
    </div>

    <div class="page-nav">
      <a href="api-keys.html">&larr; API Keys</a>
      <a href="offline-mode.html">Offline Mode &rarr;</a>
    </div>
  </main>
</div>

<script src="../shared/nav.js"></script>
</body>
</html>
